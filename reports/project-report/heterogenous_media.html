<!DOCTYPE html
    PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="images/favicon.ico" />

    <title>Computer Graphics - Final Project</title>

    <link href="resources/bootstrap.min.css" rel="stylesheet">
    <link href="resources/offcanvas.css" rel="stylesheet">
    <link href="resources/twentytwenty.css" rel="stylesheet" type="text/css" />
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <nav class="navbar bg-dark navbar-expand-lg navbar-dark fixed-top">
        <a class="navbar-brand" href="enori.html">ENori</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent"
            aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div id="navbarContent" class="collapse navbar-collapse">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="enori.html">ENori</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMatthias" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Matthias
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMatthias">
                        <a class="dropdown-item" href="adaptive.html">Adaptive Sampling</a>
                        <a class="dropdown-item" href="disney.html">Disney BSDF</a>
                        <a class="dropdown-item" href="envmap.html">Environment Map Emitter</a>
<a class="dropdown-item" href="emitters.html">Extra Emitter</a>
                        <a class="dropdown-item" href="images.html">Images as Textures</a>
                        <a class="dropdown-item" href="denoising.html">Simple Denoising</a>
                    </div>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownRoger" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Roger
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownRoger">
                        <a class="dropdown-item" href="anisotropic.html">Anisotropic Phase Function</a>
                        <a class="dropdown-item" href="blender.html">Blender</a>
                        <a class="dropdown-item" href="dof.html">Depth of Field</a>
                        <a class="dropdown-item" href="emissive_medium.html">Emissive Participating Media</a>
                        <a class="dropdown-item active" href="heterogenous_media.html">Hetergoenous Participating Media</a>
                        <a class="dropdown-item" href="normals.html">Normal Mapping</a>
                        <a class="dropdown-item" href="misc-roger.html">Misc</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container headerBar">
        <h1>Heterogenous Participating Media (Roger, 30pt)</h1>
    </div>

    <div class="container contentWrapper">
        <div class="pageContent">
            For this feature I started with the homogeneous medium and isotropic phase. 
            We can sample the free path length and its pdf (transmittance) from a medium. The transmittance supports colors.
            
            A medium can be attached to a shape and a medium has a phase function.
            When a ray enters a shape the active medium is updated in the integrator. When it leaves the medium the scene medium replaces it. The scene medium
            is a vacuum medium by default, with infinite free path. However, an arbitrary medium can be attached to the scene. There are some limitations to
            scene media. They cannot have an emitter and rays that miss the scene currently use the environment map.

            To support heterogeneous media I used the delta tracking method to step along the ray and sample the free path distance. This iteration is done to sample
            the free path length and again to determine the pdf of sampling that distance.

            I used NanoVDB to query the vdb volume I exported in blender. The vdb structure is a child object of the heterogeneous media and contains a density and temperature grid.

            I used the NanoVDB viewer as a reference.

            <h4>Cbox without volumes - Comparison to pa4 path integrators</h4>
            <div class="twentytwenty-container">
                <img src="images/volume/cbox_path_mats.png" alt="path_mats" class="img-responsive">
                <img src="images/volume/cbox_path_mis.png" alt="path_mis" class="img-responsive">
                <img src="images/volume/cbox_path_vol_mats.png" alt="path_vol_mats" class="img-responsive">
                <img src="images/volume/cbox_path_vol_mis.png" alt="path_vol_mis" class="img-responsive">
            </div> <br>

            <h4>Cbox homogeneous volume - </h4>
            <div class="twentytwenty-container">
                <img src="images/volume/cbox_homog_mats.png" alt="path_mats" class="img-responsive">
                <img src="images/volume/cbox_homog_mis.png" alt="path_mis" class="img-responsive">
                <img src="images/volume/cbox_homog_ref.png" alt="Blender" class="img-responsive">
            </div> <br>
            <p>Isotropic phase, unit density.</p>

            <h4>Implemented in:</h4>
            <ul>
                <li>include/nori/medium.h</li>
                <li>src/media/medium.cpp</li>
                <li>src/media/vacuum.cpp</li>
                <li>src/media/homogeneous.cpp</li>
                <li>src/media/heterogeneous.cpp</li>
                <li>src/integrators/path_vol_mats.cpp</li>
                <li>src/integrators/path_vol_mis.cpp</li>
                <li>include/nori/NvdbVolume.h</li>
                <li>src/textures/NvdbVolume.cpp</li>
                <li>src/textures/NvdbVolume.vdb.cpp</li>
            </ul>

        </div>
    </div>


    <!-- Bootstrap core JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="resources/bootstrap.min.js"></script>
    <script src="resources/jquery.event.move.js"></script>
    <script src="resources/jquery.twentytwenty.js"></script>


    <script>
        $(window).load(function () { $(".twentytwenty-container").twentytwenty({ default_offset_pct: 0.5 }); });
    </script>

</body>

</html>