<!DOCTYPE html
    PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="images/favicon.ico" />

    <title>Computer Graphics - Final Project</title>

    <link href="resources/bootstrap.min.css" rel="stylesheet">
    <link href="resources/offcanvas.css" rel="stylesheet">
    <link href="resources/twentytwenty.css" rel="stylesheet" type="text/css" />
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <nav class="navbar bg-dark navbar-expand-lg navbar-dark fixed-top">
        <a class="navbar-brand" href="enori.html">ENori</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent"
            aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div id="navbarContent" class="collapse navbar-collapse">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="enori.html">ENori</a>
                </li>
                <li class="nav-item dropdown active">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMatthias" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Matthias
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownMatthias">
                        <a class="dropdown-item" href="adaptive.html">Adaptive Sampling</a>
                        <a class="dropdown-item" href="disney.html">Disney BSDF</a>
                        <a class="dropdown-item" href="envmap.html">Environment Map Emitter</a>
                        <a class="dropdown-item active" href="emitters.html">Extra Emitter</a>
                        <a class="dropdown-item" href="images.html">Images as Textures</a>
                        <a class="dropdown-item" href="denoising.html">Simple Denoising</a>
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownRoger" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Roger
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownRoger">
                        <a class="dropdown-item" href="anisotropic.html">Anisotropic Phase Function</a>
                        <a class="dropdown-item" href="blender.html">Blender</a>
                        <a class="dropdown-item" href="dof.html">Depth of Field</a>
                        <a class="dropdown-item" href="emissive_medium.html">Emissive Participating Media</a>
                        <a class="dropdown-item" href="heterogenous_media.html">Hetergoenous Participating Media</a>
                        <a class="dropdown-item" href="normals.html">Normal Mapping</a>
                        <a class="dropdown-item" href="misc-roger.html">Misc</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container headerBar">
        <h1>Simple Extra Emitter - Spotlight (Matthias, 5pt)</h1>
    </div>

    <div class="container contentWrapper">
        <div class="pageContent">
            <p>In this extra emitter, the Spotlight, the light can only travel from a single point (like with the
                pointlight), but not only to a given direction, but rather in a certain cone (like a solid angle around
                the point). My implementation follows <a href="#ref-1">[1]</a>.</p>

            <h4>Validation 1: Multiple Spot Lights</h4>
            <p>This image shows multiple spotlights, each operating on a color channel. The boundaries of each spotlight
                is clearly visible. The white spotlight is added such that the background gets more light. All
                spotlights are set up that the falloff does not yet start (left image) and has already started (right
                image).</p>
            <div class="twentytwenty-container">
                <img src="images/emitter/no-falloff.png" alt="No Falloff" class="img-responsive">
                <img src="images/emitter/falloff.png" alt="Falloff" class="img-responsive">
            </div>
            <h4>Validation 2: Using Material Sampling</h4>
            <p>As the spot light emitter has zero size, the probability of it getting hit by a random ray in the scene
                is 0. This means, that material sampling does not "see" any contribution from this emitter. The
                following image shows this. It was rendered using Path MATS integrator. It is clearly visible that the
                spotlight contribution were not added.</p>
            <div class="twentytwenty-container">
                <img src="images/emitter/mats.png" alt="" class="img-responsive">
            </div>

            <h4>Validation 3: Comparison to Blender</h4>
            <p>Altough the floor is not in the same place, the spotlight's position is the same (and all parameters are
                the same). We can see that the spotlight has indeed zero size, because we have hard shadows and no
                penumbra. As also seen in the <a href="disney.html">Disney BSDF</a> Blender validation images, nori
                produces slightly darker images. This can also be seen here. The color of the spotligh is clearly
                darker, while the shape is exactly the same.</p>
            <div class="twentytwenty-container">
                <img src="images/emitter/blender_1.png" alt="Blender" class="img-responsive">
                <img src="images/emitter/nori_1.png" alt="Nori" class="img-responsive">
            </div>
            <div class="twentytwenty-container">
                <img src="images/emitter/blender_2.png" alt="Blender" class="img-responsive">
                <img src="images/emitter/nori_2.png" alt="Nori" class="img-responsive">
            </div>
            <p>This last comparison shows the difference between the Blender parameter "blend" and my parameter
                "falloff". My parameter sets the distance, where the falloff starts (here set to 0). This means, that
                after a certain distance, the light has a falloff (and therefore a softer transition at the edges).
                Blender does not have this feature, however they have the feature to "blend", which does more or less
                the same, but a different way. This means, that a comparison is not fully possible. As even mitsuba does
                not support this feature, and I could not getting the scene to work with the pbrt-v3 renderer, I could
                not provide a second validation of this feature.</p>
            <div class="twentytwenty-container">
                <img src="images/emitter/blender_3.png" alt="Blender" class="img-responsive">
                <img src="images/emitter/nori_3.png" alt="Nori" class="img-responsive">
            </div>

            <h4>Implementation</h4>
            <p>The spotlight is implemented like a pointlight (this means, material sampling should not see any
                contribution from it because of the infinitesimal small point), but where the direction of the outgoing
                light is not in all directions, but rather in only a specified solid angle. I choose to implement a
                direction vector, which goes from the position of the light in the direction the cone should be. The
                size of the cone is controlled with the total angle of the cone (in degrees). Furthermore, I implemented
                the falloff value to be a float. This means that after this distance, the light starts to fall off. This
                is visible in the above pictures.</p>

            <h4>Implemented in:</h4>
            <ul>
                <li>src/emitters/spotlight.cpp</li>
            </ul>

            <h4>References</h4>
            <p id="ref-1">[1] <a
                    href="http://www.pbr-book.org/3ed-2018/Light_Sources/Point_Lights.html">http://www.pbr-book.org/3ed-2018/Light_Sources/Point_Lights.html</a>
            </p>
        </div>
    </div>


    <!-- Bootstrap core JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="resources/bootstrap.min.js"></script>
    <script src="resources/jquery.event.move.js"></script>
    <script src="resources/jquery.twentytwenty.js"></script>


    <script>
        $(window).load(function () { $(".twentytwenty-container").twentytwenty({ default_offset_pct: 0.5 }); });
    </script>

</body>

</html>